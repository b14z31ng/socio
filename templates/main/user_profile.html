{% extends 'main/base.html' %}
{% block title %}{{ other.username }}'s Profile | My Secure Social{% endblock %}
{% block content %}
<h2>{{ other.username }}'s Profile</h2>
{% if profile and profile.get_profile_pic_url %}
    <img src="{{ profile.get_profile_pic_url }}" alt="Profile Picture" width="100" style="border-radius:50px;">
{% endif %}
{% if profile and profile.get_bio %}
    <p>{{ profile.get_bio }}</p>
{% endif %}

{% if is_self %}
    <span>This is your profile.</span>
{% else %}
    <form method="post">{% csrf_token %}
        {% if relationship == 'not_friends' %}
            <button type="submit" name="send_request">Send Friend Request</button>
        {% elif relationship == 'outgoing_pending' %}
            <button type="submit" name="cancel_request">Cancel Request</button>
        {% elif relationship == 'incoming_pending' %}
            <button type="submit" name="accept_request">Accept</button>
            <button type="submit" name="decline_request">Decline</button>
        {% elif relationship == 'friends' %}
            <button type="submit" name="unfriend">Unfriend</button>
        {% endif %}
        <button type="submit" name="message">Message</button>
    </form>
{% endif %}

<h3>Posts</h3>
{% for post in posts %}
    <div style="border:1px solid #ccc; margin-bottom:10px; padding:10px;">
        <p>{{ post.content }}</p>
        <small>{{ post.created_at }}</small>
    </div>
{% empty %}
    <p>No posts yet.</p>
{% endfor %}
{% endblock %}
